import{_ as v,r as c,u as C,f as I,g as b,o as _,c as m,a as s,h as u,v as i,t as S,i as A,j as V,p as h,e as w,N as p,b as M}from"./DAaR74PX.js";import{a as N}from"./B4uVmeYG.js";import{u as k}from"./D9smuVxM.js";import{_ as $}from"./Da1lXL78.js";const g=e=>(h("data-v-1367ecc1"),e=e(),w(),e),B={class:"change-password-container"},R=g(()=>s("h2",null,"パスワードを変更する",-1)),U={class:"input-group"},D={class:"input-group"},F={class:"input-group"},H=g(()=>s("button",{type:"submit"},"パスワードを変更する",-1)),j={key:0,class:"error-message"},q={__name:"ChangePasswordForm",setup(e){const n=c(""),t=c(""),o=c(""),a=c(""),f=C(),y=I(),P=c(""),x=async()=>{if(p.start(),p.set(.4),!n.value||!t.value||!o.value){a.value="すべてのフィールドを入力してください。";return}if(t.value!==o.value){a.value="新しいパスワードと確認用パスワードが一致しません。";return}try{(await N.post("https://naadstkfr7.execute-api.ap-southeast-1.amazonaws.com/users/changePassword",{email:sessionStorage.getItem("email"),password:n.value,newpassword:t.value,confirmpassword:o.value},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}})).status===200?(a.value="",y.push("/admin/login")):a.value="サーバーに接続できません。後でもう一度やり直してください。"}catch(d){a.value="パスワードの変更に失敗しました。",console.error("Change password error:",d)}finally{p.done()}};return b(()=>{P.value=f.query.code}),(d,r)=>(_(),m("div",B,[R,s("form",{onSubmit:V(x,["prevent"])},[s("div",U,[u(s("input",{type:"password","onUpdate:modelValue":r[0]||(r[0]=l=>n.value=l),placeholder:"現在のパスワード"},null,512),[[i,n.value]])]),s("div",D,[u(s("input",{type:"password","onUpdate:modelValue":r[1]||(r[1]=l=>t.value=l),placeholder:"新しいパスワード"},null,512),[[i,t.value]])]),s("div",F,[u(s("input",{type:"password","onUpdate:modelValue":r[2]||(r[2]=l=>o.value=l),placeholder:"パスワードの確認"},null,512),[[i,o.value]])]),H,a.value?(_(),m("p",j,S(a.value),1)):A("",!0)],32)]))}},z=v(q,[["__scopeId","data-v-1367ecc1"]]),E=e=>(h("data-v-52a86e8d"),e=e(),w(),e),O={class:"login-page"},T=E(()=>s("div",{class:"branding"},[s("img",{src:$,class:"brand-icon"}),s("p",{class:"brand-text"},"スカイウォーキング・デジタルクイズチャレンジ Admin")],-1)),G={__name:"ChangePassword",setup(e){return k({title:"Change Password | MIRAI"}),(n,t)=>{const o=z;return _(),m("div",null,[s("div",O,[T,M(o)])])}}},W=v(G,[["__scopeId","data-v-52a86e8d"]]);export{W as default};

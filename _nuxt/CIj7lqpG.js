import{_ as v,r as i,f as x,g as C,k as b,o as r,c,a as e,h as k,v as E,t as _,i as m,j as I,p as h,e as g,N as l,l as P,b as S}from"./DAaR74PX.js";import{a as A}from"./B4uVmeYG.js";import{u as M}from"./D9smuVxM.js";import{_ as T}from"./Da1lXL78.js";const d=s=>(h("data-v-a8515c05"),s=s(),g(),s),N={class:"change-password-container"},V=d(()=>e("h2",null,"パスワードを変更する",-1)),$=d(()=>e("p",{class:"description"}," アカウントの電子メールを入力してください。パスワードをリセットするための電子メールが送信されます。 ",-1)),B={class:"input-group"},D=d(()=>e("button",{type:"submit"},"メールを送る",-1)),F={key:0,class:"error-message"},H={key:1,class:"success-message"},L={__name:"ChangePasswordTypeEmailForm",setup(s){const t=i(""),a=i(""),o=i(""),f=x(),w=async()=>{if(l.start(),l.set(.4),!t.value){a.value="電子メールを入力してください。";return}try{(await A.post("https://naadstkfr7.execute-api.ap-southeast-1.amazonaws.com/users/sendCode",{email:t.value},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}})).status===200?(o.value="パスワードリセットメールを送信しました。",a.value="",t.value="",P.promise(new Promise(n=>{setTimeout(()=>{n()},1)}),{pending:"メールを送信しています..",success:"メールの送信に成功しました",error:"メールの送信に失敗しました"}).then(()=>{f.push("/admin/login")})):(a.value="サーバーに接続できません。後でもう一度やり直してください。",o.value="")}catch{a.value="電子メールが無効であるか、このアカウントは存在しません。",o.value=""}finally{l.done()}};C(()=>{document.addEventListener("click",u)}),b(()=>{document.removeEventListener("click",u)});const u=()=>{a.value="",o.value=""};return(p,n)=>(r(),c("div",N,[V,$,e("form",{onSubmit:I(w,["prevent"])},[e("div",B,[k(e("input",{type:"email","onUpdate:modelValue":n[0]||(n[0]=y=>t.value=y),placeholder:"メールアドレス"},null,512),[[E,t.value]])]),D,a.value?(r(),c("p",F,_(a.value),1)):m("",!0),o.value?(r(),c("p",H,_(o.value),1)):m("",!0)],32)]))}},R=v(L,[["__scopeId","data-v-a8515c05"]]),U=s=>(h("data-v-2828921d"),s=s(),g(),s),j={class:"login-page"},z=U(()=>e("div",{class:"branding"},[e("img",{src:T,class:"brand-icon"}),e("p",{class:"brand-text"},"スカイウォーキング・デジタルクイズチャレンジ Admin")],-1)),O={__name:"ChangePasswordTypeEmail",setup(s){return M({title:"Change Password | MIRAI"}),(t,a)=>{const o=R;return r(),c("div",null,[e("div",j,[z,S(o)])])}}},Q=v(O,[["__scopeId","data-v-2828921d"]]);export{Q as default};

import{_ as S}from"./DSWV5wxU.js";import{_ as h,r as l,f as b,k,o as p,c as _,a as e,h as v,v as C,a5 as N,G as V,b as g,w as A,d as E,t as M,i as P,j as $,p as f,e as w,N as d}from"./DAaR74PX.js";import{a as B}from"./B4uVmeYG.js";import{e as D}from"./9DZ4zt_b.js";import{u as H}from"./D9smuVxM.js";import{_ as T}from"./Da1lXL78.js";const x=s=>(f("data-v-89a87e13"),s=s(),w(),s),U={class:"login-container"},F=x(()=>e("h2",null,"ログイン",-1)),R={class:"input-group"},j={class:"input-group relative"},z=["type"],G=["src"],O={class:"forgot-password"},q=x(()=>e("button",{type:"submit"},"ログイン",-1)),J={key:0,class:"error-message"},K={__name:"LoginForm",setup(s){const o=l(""),a=l(""),r=l(!1),t=l(""),m=b(),y=async()=>{if(!o.value||!a.value){t.value="ユーザー名とパスワードを入力してください。";return}d.start(),d.set(.4);try{const n=await B.post("https://naadstkfr7.execute-api.ap-southeast-1.amazonaws.com/users/login",{email:o.value,password:a.value},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}});n.status===200?(sessionStorage.setItem("email",n.data),await m.push("/admin/Home"),o.value="",a.value=""):n.status===202?(sessionStorage.setItem("email",n.data),await m.push("/admin/ChangePassword"),o.value="",a.value=""):t.value="サーバーに接続できません。後でもう一度やり直してください。"}catch(n){t.value="コードが正しくありません",console.error("Login error:",n)}finally{d.done()}},I=()=>{r.value=!r.value};k(()=>{document.addEventListener("click",i),document.removeEventListener("click",i)});const i=()=>{t.value=""};return(n,c)=>{const L=S;return p(),_("div",U,[F,e("form",{onSubmit:$(y,["prevent"])},[e("div",R,[v(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=u=>o.value=u),onInput:i,placeholder:"ユーザー名または電子メール"},null,544),[[C,o.value]])]),e("div",j,[v(e("input",{type:r.value?"text":"password","onUpdate:modelValue":c[1]||(c[1]=u=>a.value=u),onInput:i,placeholder:"パスワード"},null,40,z),[[N,a.value]]),e("img",{onClick:I,src:V(D),class:"eye-icon"},null,8,G)]),e("div",O,[g(L,{to:"/admin/ChangePasswordTypeEmail"},{default:A(()=>[E("パスワードを忘れましたか?")]),_:1})]),q,t.value?(p(),_("p",J,M(t.value),1)):P("",!0)],32)])}}},Q=h(K,[["__scopeId","data-v-89a87e13"]]),W=s=>(f("data-v-a390e276"),s=s(),w(),s),X={class:"login-page"},Y=W(()=>e("div",{class:"branding"},[e("img",{src:T,class:"brand-icon"}),e("p",{class:"brand-text"},"スカイウォーキング・デジタルクイズチャレンジ Admin")],-1)),Z={__name:"Login",setup(s){const o=()=>{router.push("/admin/home")};return H({title:"Login | MIRAI"}),(a,r)=>{const t=Q;return p(),_("div",null,[e("div",X,[Y,g(t,{onLoginSuccess:o})])])}}},re=h(Z,[["__scopeId","data-v-a390e276"]]);export{re as default};
